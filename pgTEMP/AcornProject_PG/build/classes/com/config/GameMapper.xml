<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="GameMapper">
	
	<select id="newGameListSelect" resultType="GameDTO">
		SELECT *
		FROM game
		ORDER BY gameReleaseDate DESC
	</select>
	
	<select id="recommendGameListSelect" resultType="GameDTO">
		SELECT game.*
		FROM game, rate
		WHERE game.gameNo = rate.gameNo
		ORDER BY rate.gameScore DESC, game.gameReleasedDate DESC
	</select>
	
<<<<<<< HEAD
	<select id="tagGameListSelect" parameterType="string" resultType="GameDTO">
=======
	<select id="tagGameListSelect" parameterType="list" resultType="GameDTO">
>>>>>>> 9d111c7857ef170dd3c02a10d45c37d5de1a084f
		SELECT game.*
		FROM game, rate
		WHERE game.gameNo = rate.gameNo
		AND REGEXP_LIKE (game.gameGenre, (SELECT NVL(REPLACE(mbrGenre, ',', '|'), '*')
		                       FROM member
		                       WHERE mbrId = #{
		                       ))
		ORDER BY rate.gameScore DESC, game.gameReleasedDate DESC;
	</select>
	
	<select id="detailGameSelect" resultType="GameDTO">
		SELECT *
		FROM game
		WHERE gameNo = #{gameNo}
	</select>
	
</mapper>